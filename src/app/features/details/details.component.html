<section class="bg-linear-to-br from-slate-50 to-gray-100 min-h-screen py-8 px-4">
    <div class="container mx-auto max-w-7xl">
        <div class="grid lg:grid-cols-2 gap-8 items-start">
            
            <!-- Product Image Section -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                    @if (productDetails(); as product) {
                        <div class="relative h-96 overflow-hidden bg-linear-to-br from-gray-50 to-gray-100 group">
                            <img class="w-full h-full object-cover transition-transform duration-700 ease-out group-hover:scale-110 cursor-pointer" 
                                 [src]="product.imageCover" [alt]="product.title" [title]="product.title">
                            
                            <!-- Image Overlay Effects -->
                            <div class="absolute inset-0 bg-linear-to-t from-black/30 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                            
                            <!-- Category Badge -->
                            @if (product.category) {
                                <div class="absolute top-4 left-4 bg-teal-600 text-white text-sm px-3 py-2 rounded-full font-semibold backdrop-blur-sm bg-opacity-90 transform transition-transform duration-300 group-hover:scale-105">
                                    <i class="fas fa-tag mr-2"></i>
                                    {{product.category.name}}
                                </div>
                            }
                            
                            <!-- Image Action Buttons -->
                            <div class="absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <button class="bg-white/90 backdrop-blur-sm p-2 rounded-lg shadow-lg hover:bg-white transition-all duration-200 transform hover:scale-110">
                                    <i class="fas fa-search-plus text-gray-700"></i>
                                </button>
                                <button class="bg-white/90 backdrop-blur-sm p-2 rounded-lg shadow-lg hover:bg-white transition-all duration-200 transform hover:scale-110">
                                    <i class="fas fa-expand text-gray-700"></i>
                                </button>
                            </div>
                            
                            <!-- Image Gallery Indicators -->
                            @if (product.images && product.images.length > 1) {
                                <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                    @for (image of product.images; track $index) {
                                        <div class="w-2 h-2 bg-white/60 rounded-full cursor-pointer hover:bg-white transition-colors duration-200"
                                             [class]="image === product.imageCover ? 'bg-white w-8' : ''"></div>
                                    }
                                </div>
                            }
                        </div>
                        
                        <!-- Image Gallery Thumbnails -->
                        @if (product.images && product.images.length > 1) {
                            <div class="p-4 bg-gray-50 border-t border-gray-200">
                                <div class="flex gap-2 overflow-x-auto pb-2">
                                    @for (image of product.images; track $index) {
                                        <div class="flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden cursor-pointer border-2 transition-all duration-200 hover:border-teal-500 hover:scale-105"
                                             [class]="image === product.imageCover ? 'border-teal-600' : 'border-gray-300'">
                                            <img [src]="image" [alt]="'Thumbnail ' + ($index + 1)" 
                                                 class="w-full h-full object-cover">
                                        </div>
                                    }
                                </div>
                            </div>
                        }
                    } @else {
                        <div class="h-96 bg-gray-200 animate-pulse flex items-center justify-center">
                            <div class="text-center">
                                <div class="inline-flex items-center justify-center w-16 h-16 bg-gray-300 rounded-full mb-4">
                                    <i class="fas fa-spinner fa-spin text-2xl text-gray-500"></i>
                                </div>
                                <p class="text-gray-500">Loading image...</p>
                            </div>
                        </div>
                    }
                </div>
            </div>

            <!-- Product Details Section -->
            <div class="lg:col-span-1">
                @if (productDetails(); as product) {
                    <div class="bg-white rounded-2xl shadow-xl p-8">
                        
                        <!-- Product Title & Rating -->
                        <div class="mb-6">
                            <h1 class="text-3xl font-bold text-gray-800 mb-3 leading-tight">
                                {{product.title}}
                            </h1>
                            
                            <!-- Rating and Price Row -->
                            <div class="flex items-center justify-between flex-wrap gap-4">
                                <div class="flex items-center gap-2">
                                    @for (star of [1,2,3,4,5]; track star) {
                                        <i class="fas fa-star text-2xl" 
                                           [class]="star <= floor(product.ratingsAverage || 0) ? 'text-yellow-400' : 'text-gray-300'"></i>
                                    }
                                    <span class="text-lg font-semibold text-gray-700 ml-2">
                                        {{product.ratingsAverage || 'No rating'}}
                                    </span>
                                </div>
                                
                                <div class="text-right">
                                    <div class="text-3xl font-bold text-teal-600">
                                        {{product.price}} EGP
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Product Description -->
                        <div class="mb-6">
                            <h2 class="text-xl font-semibold text-gray-800 mb-3 flex items-center gap-2">
                                <i class="fas fa-info-circle text-teal-600"></i>
                                Description
                            </h2>
                            <p class="text-gray-600 leading-relaxed text-lg">
                                {{product.description}}
                            </p>
                        </div>

                        <!-- Product Category -->
                        @if (product.category) {
                            <div class="mb-6">
                                <h3 class="text-lg font-semibold text-gray-800 mb-2 flex items-center gap-2">
                                    <i class="fas fa-tag text-teal-600"></i>
                                    Category
                                </h3>
                                <div class="bg-gray-100 rounded-lg px-4 py-3 inline-block">
                                    {{product.category.name}}
                                </div>
                            </div>
                        }

                        <!-- Additional Product Info -->
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            @if (product.brand) {
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="text-sm font-semibold text-gray-700 mb-1">Brand</h4>
                                    <p class="text-gray-800">{{product.brand.name}}</p>
                                </div>
                            }
                            
                            @if (product.subcategory && product.subcategory.length > 0) {
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="text-sm font-semibold text-gray-700 mb-1">Subcategory</h4>
                                    <p class="text-gray-800">{{product.subcategory[0].name}}</p>
                                </div>
                            }
                        </div>

                        <!-- Stock & Availability -->
                        <div class="mb-8">
                            <div class="flex items-center gap-4 p-4 bg-green-50 rounded-lg border border-green-200">
                                <i class="fas fa-check-circle text-green-600 text-xl"></i>
                                <div>
                                    <span class="font-semibold text-green-800">In Stock</span>
                                    <span class="text-sm text-green-600 ml-2">Ready to ship</span>
                                </div>
                            </div>
                        </div>

                        <!-- Add to Cart Button -->
                        <div class="space-y-4">
                            <button (click)="addProductToCart()" 
                                    class="w-full bg-linear-to-r from-teal-600 to-cyan-600 text-white py-4 rounded-xl font-semibold 
                                           hover:from-teal-700 hover:to-cyan-700 transition-all duration-300 transform hover:scale-102 shadow-lg flex items-center justify-center gap-3">
                                <i class="fas fa-shopping-cart text-xl"></i>
                                Add to Cart
                            </button>
                            
                            <!-- Additional Actions -->
                            <div class="flex gap-3">
                                <button class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors duration-200 flex items-center justify-center gap-2">
                                    <i class="far fa-heart"></i>
                                    Add to Wishlist
                                </button>
                                <button class="flex-1 bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition-colors duration-200 flex items-center justify-center gap-2">
                                    <i class="fas fa-share-alt"></i>
                                    Share
                                </button>
                            </div>
                        </div>
                    </div>
                } @else {
                    <!-- Loading State -->
                    <div class="bg-white rounded-2xl shadow-xl p-12">
                        <div class="text-center space-y-4">
                            <div class="inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full">
                                <i class="fas fa-spinner fa-spin text-2xl text-gray-400"></i>
                            </div>
                            <h3 class="text-xl font-semibold text-gray-700">Loading Product Details</h3>
                            <p class="text-gray-500">Please wait while we fetch the product information...</p>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</section>
